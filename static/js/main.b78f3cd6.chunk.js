(this["webpackJsonprick-and-morty"]=this["webpackJsonprick-and-morty"]||[]).push([[0],{22:function(e,a,t){e.exports={container:"card_container__3NdGe",card:"card_card__-S-Zt",name:"card_name__1x3Wm",actions:"card_actions__1F14G",left:"card_left__15YBr",right:"card_right__30xzM"}},48:function(e,a,t){e.exports={container:"home_container__3b_Hh"}},52:function(e,a,t){e.exports={container:"favs_container__1GD2_"}},53:function(e,a,t){e.exports={container:"login_container__27O45"}},57:function(e,a,t){e.exports=t(86)},62:function(e,a,t){},63:function(e,a,t){},86:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=t(32),o=t.n(c),i=(t(62),t(63),t(15)),l=t(16),u=t(56),s=t(13),g=t(46),f=t.n(g),d=function(){return r.a.createElement(f.a,{css:"\n        display: block;\n        margin: 0 auto;\n    ",color:"lightseagreen"})};var m=Object(s.b)((function(e){var a=e.user;return{loggedIn:a.loggedIn,fetching:a.fetching}}))((function(e){var a=e.loggedIn,t=e.fetching,n=e.redirectTo,c=Object(u.a)(e,["loggedIn","fetching","redirectTo"]);return t?r.a.createElement(d,null):a?r.a.createElement(l.b,c):r.a.createElement(l.a,{to:n})})),h=t(22),p=t.n(h),E=t(37),O=t.n(E);function _(e){return function(){return console.log(e)}}function v(e){var a=e.name,t=e.image,n=e.rightClick,c=e.leftClick,o=e.actions,i=void 0===o||o;return r.a.createElement("div",{className:p.a.container},r.a.createElement("div",{className:p.a.card},r.a.createElement("img",{alt:"rick",src:t}),r.a.createElement("p",{className:p.a.name},a),i&&r.a.createElement("div",{className:p.a.actions},r.a.createElement("div",{onClick:c||_("left"),className:p.a.left},r.a.createElement(O.a,{name:"thumbs-down",size:"2x"})),r.a.createElement("div",{onClick:n||_("right"),className:p.a.right},r.a.createElement(O.a,{name:"heart",size:"2x"})))))}v.defaultProps={name:"Rick Sanches",image:"https://rickandmortyapi.com/api/character/avatar/1.jpeg"};var y=t(48),b=t.n(y),S=t(55),C=t(49),R=t(4),T=t(23),j=t.n(T);t(82),t(83);j.a.initializeApp({apiKey:"AIzaSyBo2wNZxge0JUWT1R5ktYG35emkvT7yigw",authDomain:"cursoreactgraphql.firebaseapp.com",databaseURL:"https://cursoreactgraphql.firebaseio.com",projectId:"cursoreactgraphql",storageBucket:"cursoreactgraphql.appspot.com",messagingSenderId:"940777115619",appId:"1:940777115619:web:ce283ebfece26cf2189ad6"});var I=j.a.firestore().collection("favorites");var N=t(29);function A(){var e=Object(C.a)(["\n        query($page: Int) {\n            characters(page: $page) {\n                info {\n                    pages\n                    next\n                    prev\n                }\n                results {\n                    name\n                    image\n                }\n            }\n        }\n    "]);return A=function(){return e},e}var k=new N.a({uri:"https://rickandmortyapi.com/graphql"}),G={fetching:!1,array:[],favorites:[],error:null,nextPage:1};var w=function(){return function(e,a){e({type:"FETCH_CHARS"});var t=Object(N.b)(A()),n=a().chars.nextPage;return k.query({query:t,variables:{page:n}}).then((function(a){var t=a.data,n=a.error;n?e({type:"FETCH_CHARS_ERROR",payload:n}):(e({type:"FETCH_CHARS_SUCCESS",payload:t.characters.results}),e({type:"UPDATE_NEXT_PAGE",payload:t.characters.info.next||1}))}))}},L=function(){return function(e,a){e({type:"GET_FAVORITES"}),function(e){return I.doc(e).get().then((function(e){return e.data()?e.data().array:[]}))}(a().user.uid).then((function(a){e({type:"GET_FAVORITES_SUCCESS",payload:a})})).catch((function(a){e({type:"GET_FAVORITES_ERROR",payload:a.message})}))}},F=Object(s.b)((function(e){return{char:e.chars.array[0],fetching:e.chars.fetching}}),{nextChar:function(){return function(e,a){var t=a().chars,n=t.array;if(!t.fetching){if(1===n.length)return void w()(e,a);e({type:"NEXT_CHAR",payload:n.slice(1)})}}},addToFavorites:function(){return function(e,a){var t=a().chars,n=t.array,r=t.favorites;!function(e,a){I.doc(a).set({array:e})}(r,a().user.uid),e({type:"ADD_TO_FAVORITES",payload:{array:n.slice(1),favorites:[].concat(Object(S.a)(r),[n[0]])}})}}})((function(e){var a=e.char,t=e.fetching,n=e.nextChar,c=e.addToFavorites;return r.a.createElement("div",{className:b.a.container},r.a.createElement("h2",null,"Personajes de Rick y Morty"),r.a.createElement("div",null,t?r.a.createElement(d,null):r.a.createElement(v,Object.assign({leftClick:n,rightClick:c},a))))})),U=t(52),x=t.n(U);var H=Object(s.b)((function(e){var a=e.chars;return{favorites:a.favorites,fetching:a.fetching}}))((function(e){var a=e.favorites;return e.fetching?r.a.createElement(d,null):r.a.createElement("div",{className:x.a.container},r.a.createElement("h2",null,"Favoritos"),a.map((function(e,a){return r.a.createElement(v,Object.assign({key:e.id},e,{actions:!1}))})),!a.length&&r.a.createElement("h3",null,"No hay personajes agregados"))})),P=t(53),D=t.n(P),V={loggedIn:!1,fetching:!1};var q=function(){return function(e,a){e({type:"LOGIN"}),new Promise((function(e,a){j.a.auth().onAuthStateChanged((function(t){t?e(t):a("The user is not logged in")}))})).then((function(t){e({type:"LOGIN_SUCCESS",payload:t}),L()(e,a)})).catch((function(a){e({type:"LOGIN_ERROR",payload:a.message})}))}};var X=Object(s.b)((function(e){var a=e.user;return{fetching:a.fetching,loggedIn:a.loggedIn}}),{googleLoginAction:function(){return function(e,a){e({type:"LOGIN"}),function(){var e=new j.a.auth.GoogleAuthProvider;return j.a.auth().signInWithPopup(e).then((function(e){return e.user}))}().then((function(t){e({type:"LOGIN_SUCCESS",payload:t}),L()(e,a)})).catch((function(a){e({type:"LOGIN_ERROR",payload:a.message})}))}},logoutAction:function(){return function(e){j.a.auth().signOut().then((function(){e({type:"LOGOUT_SUCCESS"}),function(e){e({type:"CLEAN_FAVORITES_ACTION"})}(e)})).catch((function(a){e({type:"LOGOUT_ERROR",error:a.message})}))}}})((function(e){var a=e.fetching,t=e.loggedIn,n=e.googleLoginAction,c=e.logoutAction;return a?r.a.createElement(d,null):r.a.createElement("div",{className:D.a.container},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Cierra tu sesi\xf3n"),r.a.createElement("button",{onClick:c},"Cerrar Sesi\xf3n")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Inicia Sesi\xf3n con Google"),r.a.createElement("button",{onClick:n},"Iniciar")))}));function z(){return r.a.createElement(l.d,null,r.a.createElement(m,{exact:!0,path:"/",component:F,redirectTo:"/login"}),r.a.createElement(m,{path:"/favs",component:H,redirectTo:"/login"}),r.a.createElement(l.b,{path:"/login",component:X}))}var B=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"nav-bar"},r.a.createElement(i.b,{className:"link",activeClassName:"active",exact:!0,to:"/"},"Inicio"),r.a.createElement(i.b,{className:"link",activeClassName:"active",to:"/favs"},"Favoritos"),r.a.createElement(i.b,{className:"link",activeClassName:"active",to:"/login"},"Login")),r.a.createElement(z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(85);var W=t(20),M=t(54),J=[Object(W.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN":return Object(R.a)(Object(R.a)({},e),{},{fetching:!0});case"LOGIN_SUCCESS":return Object(R.a)(Object(R.a)({},e),{},{fetching:!1,loggedIn:!0,uid:a.payload.uid,displayName:a.payload.displayName,photoURL:a.payload.photoURL,email:a.payload.email});case"LOGIN_ERROR":return Object(R.a)(Object(R.a)({},e),{},{fetching:!1,error:a.payload});case"LOGOUT_SUCCESS":return V;case"LOGOUT_ERROR":return Object(R.a)(Object(R.a)({},e),{},{error:a.payload});default:return e}},chars:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_NEXT_PAGE":return Object(R.a)(Object(R.a)({},e),{},{nextPage:a.payload});case"FETCH_CHARS":return Object(R.a)(Object(R.a)({},e),{},{fetching:!0});case"FETCH_CHARS_SUCCESS":return Object(R.a)(Object(R.a)({},e),{},{fetching:!1,array:a.payload});case"FETCH_CHARS_ERROR":return Object(R.a)(Object(R.a)({},e),{},{fetching:!1,error:a.payload});case"NEXT_CHAR":return Object(R.a)(Object(R.a)({},e),{},{array:a.payload});case"ADD_TO_FAVORITES":return Object(R.a)(Object(R.a)({},e),a.payload);case"GET_FAVORITES":return Object(R.a)(Object(R.a)({},e),{},{fetching:!0});case"GET_FAVORITES_SUCCESS":return Object(R.a)(Object(R.a)({},e),{},{fetching:!1,favorites:a.payload});case"GET_FAVORITES_ERROR":return Object(R.a)(Object(R.a)({},e),{},{fetching:!1,error:a.payload});case"CLEAN_FAVORITES_ACTION":return Object(R.a)(Object(R.a)({},e),{},{favorites:null});default:return e}}}),void 0,("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:W.d)(Object(W.a)(M.a))];function $(){var e=W.e.apply(void 0,J);return q()(e.dispatch,e.getState),w()(e.dispatch,e.getState),e}var Y=t(90),Z=new N.a({uri:"https://rickandmortyapi.com/graphql"}),K=function(){return r.a.createElement(i.a,{basename:"/ReduxGraphQL"},r.a.createElement(B,null))},Q=function(){return r.a.createElement(s.a,{store:$()},r.a.createElement(K,null))},ee=function(){return r.a.createElement(Y.a,{client:Z},r.a.createElement(Q,null))};o.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[57,1,2]]]);
//# sourceMappingURL=main.b78f3cd6.chunk.js.map